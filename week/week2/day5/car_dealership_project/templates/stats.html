{% extends 'base.html' %}
{% block title %}Inventory Statistics{% endblock %}

{% block content %}
  <h1 class="text-2xl font-semibold mb-5">Inventory Statistics</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div class="bg-white border rounded-xl shadow-sm overflow-hidden">
      <div class="px-4 py-2 border-b font-medium">Total Vehicles in Stock</div>
      <div class="p-6 text-center">
        <p class="text-5xl font-extrabold text-brand">{{ total_vehicles }}</p>
      </div>
    </div>

    <div class="bg-white border rounded-xl shadow-sm overflow-hidden">
      <div class="px-4 py-2 border-b font-medium">Vehicles by Make</div>
      <div class="p-4">
        <ul class="divide-y">
          {% for item in vehicles_by_make %}
            <li class="py-2 flex justify-between items-center">
              <span>{{ item.make }}</span>
              <span class="inline-flex items-center px-2 rounded-full bg-brand/10 text-brand text-sm">{{ item.make_count }}</span>
            </li>
          {% else %}
            <li class="py-2 text-gray-500">No data available.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="bg-white border rounded-xl shadow-sm overflow-hidden">
      <div class="px-4 py-2 border-b font-medium">Most Expensive Vehicle</div>
      {% if most_expensive %}
        <div class="p-4 space-y-1">
          <h5 class="font-semibold">{{ most_expensive.year }} {{ most_expensive.make }} {{ most_expensive.model }}</h5>
          <p class="text-xl font-bold text-emerald-600">{{ "{:,.2f}".format(most_expensive.price) }} DH</p>
          <a href="{{ url_for('vehicles.details', vehicle_id=most_expensive.id) }}"
             class="inline-flex items-center px-3 py-1.5 text-sm rounded-md border text-gray-700 hover:bg-gray-100">View Details</a>
        </div>
      {% else %}
        <div class="p-4 text-gray-500">No data available.</div>
      {% endif %}
    </div>

    <div class="bg-white border rounded-xl shadow-sm overflow-hidden">
      <div class="px-4 py-2 border-b font-medium">Least Expensive Vehicle</div>
      {% if least_expensive %}
        <div class="p-4 space-y-1">
          <h5 class="font-semibold">{{ least_expensive.year }} {{ least_expensive.make }} {{ least_expensive.model }}</h5>
          <p class="text-xl font-bold text-emerald-600">{{ "{:,.2f}".format(least_expensive.price) }} DH</p>
          <a href="{{ url_for('vehicles.details', vehicle_id=least_expensive.id) }}"
             class="inline-flex items-center px-3 py-1.5 text-sm rounded-md border text-gray-700 hover:bg-gray-100">View Details</a>
        </div>
      {% else %}
        <div class="p-4 text-gray-500">No data available.</div>
      {% endif %}
    </div>
  </div>
{% endblock %}